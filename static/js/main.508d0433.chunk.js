(this["webpackJsonpmonolith-exercise-react-app"]=this["webpackJsonpmonolith-exercise-react-app"]||[]).push([[0],{129:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(27),i=a.n(c),s=(a(98),a(12)),l=a(195),j=a(196),u=a(197),o=a(198),d=a(42),b=a(61),h=a.n(b),x=a(78),O=a(62),v=a.n(O),p=a(79),g=a.n(p);var f=a(15),m=a(80),y=a.n(m);function U(e){return 0==e?"-":e}var S=a(81),_=a.n(S),E=a(187),w=a(199),D=a(203),A=a(202),B=a(200),P=a(201),R=a(194),G=a(190),k=a(82),M=a.n(k),C=a(2);function L(e){var t=e.uid,a=e.size;return Object(C.jsx)("div",Object(d.a)({style:{width:a,height:a,borderRadius:a,backgroundColor:"lightgrey",overflow:"hidden"}},t&&{dangerouslySetInnerHTML:{__html:M()(t,a)}}))}L.defaultProps={size:30};var Y=[{user_id:"1",GBP:"0",USD:"0",EUR:"0",lastActivity:""},{user_id:"2",GBP:"0",USD:"0",EUR:"0",lastActivity:""},{user_id:"3",GBP:"0",USD:"0",EUR:"0",lastActivity:""},{user_id:"4",GBP:"0",USD:"0",EUR:"0",lastActivity:""},{user_id:"5",GBP:"0",USD:"0",EUR:"0",lastActivity:""}];function z(e){return parseFloat(e)<0?{color:"#ec535a"}:parseFloat(e)>0?{color:"#27a197"}:{}}function I(e){var t=e.data,a=e.loading,n=e.error,c=Object(r.useMemo)((function(){return!0===a?Y:t||[]}),[t,a]);return n?Object(C.jsx)(l.a,{sx:{p:1},children:Object(C.jsx)(G.a,{severity:"error",children:n.message})}):0===c.length?Object(C.jsx)(l.a,{sx:{p:1},children:Object(C.jsx)(G.a,{severity:"info",children:"No Transactions"})}):Object(C.jsx)(E.a,{children:Object(C.jsxs)(w.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(C.jsx)(B.a,{children:Object(C.jsxs)(P.a,{children:[Object(C.jsx)(A.a,{padding:"checkbox"}),Object(C.jsx)(A.a,{align:"left",children:"User ID"}),Object(C.jsx)(A.a,{align:"right",children:"GBP"}),Object(C.jsx)(A.a,{align:"right",children:"USD"}),Object(C.jsx)(A.a,{align:"right",children:"EUR"}),Object(C.jsx)(A.a,{align:"right",children:"Last Activity"})]})}),Object(C.jsx)(D.a,{children:c.map((function(e){return Object(C.jsxs)(P.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(C.jsx)(A.a,{children:a?Object(C.jsx)(R.a,{variant:"circular",width:30,height:30}):Object(C.jsx)(L,{uid:e.user_id,size:30})}),Object(C.jsx)(A.a,{component:"th",scope:"row",children:a?Object(C.jsx)(R.a,{variant:"text",width:300}):e.user_id}),Object(C.jsx)(A.a,{align:"right",sx:z(e.GBP),children:a?Object(C.jsx)(R.a,{variant:"text"}):U(e.GBP)}),Object(C.jsx)(A.a,{align:"right",sx:z(e.USD),children:a?Object(C.jsx)(R.a,{variant:"text"}):U(e.USD)}),Object(C.jsx)(A.a,{align:"right",sx:z(e.EUR),children:a?Object(C.jsx)(R.a,{variant:"text"}):U(e.EUR)}),Object(C.jsx)(A.a,{align:"right",children:a?Object(C.jsx)(R.a,{variant:"text"}):_()(e.lastActivity).format("DD-MM-YYYY")})]},e.user_id)}))})]})})}var T=a(192),F=a(191),J=a(188);function H(e){var t=e.value,a=e.onChange,r=e.options;return Object(C.jsx)(T.a,{sx:{p:1,width:200},children:Object(C.jsx)(J.a,{value:t,onChange:function(e){var t=e.target.value;if(a){var n=r.find((function(e){return e.value===t}));n&&a(n)}},children:r.map((function(e){return Object(C.jsx)(F.a,{value:e.value,children:e.display},e.value)}))})})}var N="/monolith-exercise-react-app",W=[{value:"small",display:"Small",url:"".concat(N,"/transactions-small.json")},{value:"medium",display:"Medium",url:"".concat(N,"/transactions-medium.json")},{value:"large",display:"Large",url:"".concat(N,"/transactions-large.json")},{value:"xlarge",display:"X-Large (404)",url:"".concat(N,"/transactions-x-large.json")},{value:"empty",display:"Empty",url:"".concat(N,"/transactions-empty.json")}];var X=function(){var e=Object(r.useState)(W[0]),t=Object(s.a)(e,2),a=t[0],n=t[1],c=function(e){var t=Object(r.useState)(),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(),l=Object(s.a)(i,2),j=l[0],u=l[1],o=Object(r.useState)(!1),b=Object(s.a)(o,2),O=b[0],p=b[1],f=Object(r.useCallback)(function(){var e=Object(x.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),u(void 0),e.prev=2,e.next=5,g()(1e3);case 5:return e.next=7,v.a.get(t);case 7:a=e.sent,c(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),v.a.isAxiosError(e.t0)&&u(e.t0);case 14:return e.prev=14,p(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){f(e)}),[e]),Object(d.a)(Object(d.a)({},n),{},{loading:O,error:j})}(a.url),i=c.data,b=c.error,O=c.loading,p=Object(r.useMemo)((function(){return function(e){var t=new Map;return e.forEach((function(e){t.has(e.user_id)||t.set(e.user_id,{user_id:e.user_id,GBP:"0",USD:"0",EUR:"0",lastActivity:e.timestamp});var a,r=t.get(e.user_id);return r&&(r[e.currency]=((a=new y.a(r[e.currency]).add(e.amount))>0?"+":"")+a,e.timestamp>r.lastActivity&&(r.lastActivity=e.timestamp)),t})),Object(f.a)(t).map((function(e){var t=Object(s.a)(e,2);return t[0],t[1]}))}(i||[])}),[i]),m=Object(r.useCallback)((function(e){n(e)}),[]);return Object(C.jsx)(l.a,{sx:{m:6},children:Object(C.jsxs)(j.a,{children:[Object(C.jsxs)(u.a,{children:[Object(C.jsx)(o.a,{sx:{flex:"1 1 100%"},variant:"h6",children:"Transactions"}),Object(C.jsx)(H,{value:a.value,options:W,onChange:m})]}),Object(C.jsx)(I,{data:p,loading:O,error:b})]})})};i.a.render(Object(C.jsx)(n.a.StrictMode,{children:Object(C.jsx)(X,{})}),document.getElementById("root"))},98:function(e,t,a){}},[[129,1,2]]]);
//# sourceMappingURL=main.508d0433.chunk.js.map