(this["webpackJsonpmonolith-exercise-react-app"]=this["webpackJsonpmonolith-exercise-react-app"]||[]).push([[0],{128:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),i=a(29),c=a.n(i),s=(a(97),a(12)),l=a(194),u=a(195),j=a(196),o=a(197),d=a(43),h=a(61),b=a.n(h),x=a(78),v=a(62),O=a.n(v),p=a(79),g=a.n(p);var f=a(15),m=a(36),y=a.n(m),w=a(80),_=a.n(w);function A(t){var e=new y.a(t);return e.equals(0)?"-":"".concat(e.gte(0)?"+":"").concat(e.toString())}var S=a(186),k=a(198),E=a(202),M=a(201),U=a(199),C=a(200),D=a(193),B=a(189),L=a(81),R=a.n(L),Y=a(2);function G(t){var e=t.uid,a=t.size;return Object(Y.jsx)("div",Object(d.a)({style:{width:a,height:a,borderRadius:a,backgroundColor:"lightgrey",overflow:"hidden"}},t.uid&&{dangerouslySetInnerHTML:{__html:R()(e,a)}}))}var I=[{user_id:"1",gbp:"0",usd:"0",eur:"0",lastActivity:""},{user_id:"2",gbp:"0",usd:"0",eur:"0",lastActivity:""},{user_id:"3",gbp:"0",usd:"0",eur:"0",lastActivity:""},{user_id:"4",gbp:"0",usd:"0",eur:"0",lastActivity:""},{user_id:"5",gbp:"0",usd:"0",eur:"0",lastActivity:""}];function P(t){return parseFloat(t)<0?{color:"#ec535a"}:parseFloat(t)>0?{color:"#27a197"}:{}}function T(t){var e=t.data,a=t.loading,n=t.error,i=Object(r.useMemo)((function(){return a?I:e}),[e,a]);return n?Object(Y.jsx)(l.a,{sx:{p:1},children:Object(Y.jsx)(B.a,{severity:"error",children:n.message})}):0===i.length?Object(Y.jsx)(l.a,{sx:{p:1},children:Object(Y.jsx)(B.a,{severity:"info",children:"No Transactions"})}):Object(Y.jsx)(S.a,{children:Object(Y.jsxs)(k.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(Y.jsx)(U.a,{children:Object(Y.jsxs)(C.a,{children:[Object(Y.jsx)(M.a,{padding:"checkbox"}),Object(Y.jsx)(M.a,{align:"left",children:"User ID"}),Object(Y.jsx)(M.a,{align:"right",children:"GBP"}),Object(Y.jsx)(M.a,{align:"right",children:"USD"}),Object(Y.jsx)(M.a,{align:"right",children:"EUR"}),Object(Y.jsx)(M.a,{align:"right",children:"Last Activity"})]})}),Object(Y.jsx)(E.a,{children:i.map((function(t){return Object(Y.jsxs)(C.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(Y.jsx)(M.a,{children:a?Object(Y.jsx)(D.a,{variant:"circular",width:30,height:30}):Object(Y.jsx)(G,{uid:t.user_id,size:30})}),Object(Y.jsx)(M.a,{component:"th",scope:"row",children:a?Object(Y.jsx)(D.a,{variant:"text",width:300}):t.user_id}),Object(Y.jsx)(M.a,{align:"right",sx:P(t.gbp),children:a?Object(Y.jsx)(D.a,{variant:"text"}):t.gbp}),Object(Y.jsx)(M.a,{align:"right",sx:P(t.usd),children:a?Object(Y.jsx)(D.a,{variant:"text"}):t.usd}),Object(Y.jsx)(M.a,{align:"right",sx:P(t.eur),children:a?Object(Y.jsx)(D.a,{variant:"text"}):t.eur}),Object(Y.jsx)(M.a,{align:"right",children:a?Object(Y.jsx)(D.a,{variant:"text"}):t.lastActivity})]},t.user_id)}))})]})})}var z=a(191),F=a(190),J=a(187);function q(t){var e=t.value,a=t.onChange,r=t.options;return Object(Y.jsx)(z.a,{sx:{p:1,width:200},children:Object(Y.jsx)(J.a,{value:e,onChange:function(t){var e=t.target.value;if(a){var n=r.find((function(t){return t.value===e}));n&&a(n)}},children:r.map((function(t){return Object(Y.jsx)(F.a,{value:t.value,children:t.display},t.value)}))})})}var H=[{value:"small",display:"Small",url:"http://localhost:3000/transactions-small.json"},{value:"medium",display:"Medium",url:"http://localhost:3000/transactions-medium.json"},{value:"large",display:"Large",url:"http://localhost:3000/transactions-large.json"},{value:"xlarge",display:"X-Large (404)",url:"http://localhost:3000/transactions-x-large.json"},{value:"empty",display:"Empty",url:"http://localhost:3000/transactions-empty.json"}];var N=function(){var t=Object(r.useState)(H[0]),e=Object(s.a)(t,2),a=e[0],n=e[1],i=function(t){var e=Object(r.useState)(),a=Object(s.a)(e,2),n=a[0],i=a[1],c=Object(r.useState)(),l=Object(s.a)(c,2),u=l[0],j=l[1],o=Object(r.useState)(!1),h=Object(s.a)(o,2),v=h[0],p=h[1],f=Object(r.useCallback)(function(){var t=Object(x.a)(b.a.mark((function t(e){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),j(void 0),t.prev=2,t.next=5,g()(1e3);case 5:return t.next=7,O.a.get(e);case 7:a=t.sent,i(a),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),O.a.isAxiosError(t.t0)&&j(t.t0);case 14:return t.prev=14,p(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})));return function(e){return t.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){f(t)}),[t]),Object(d.a)(Object(d.a)({},n),{},{loading:v,error:u})}(a.url),c=i.data,h=i.error,v=i.loading,p=Object(r.useMemo)((function(){return function(t){var e=new Map;return t.forEach((function(t){e.has(t.user_id)||e.set(t.user_id,{GBP:new y.a(0),USD:new y.a(0),EUR:new y.a(0),lastActivity:t.timestamp});var a=e.get(t.user_id);return a&&(a[t.currency]=a[t.currency].add(t.amount),t.timestamp>a.lastActivity&&(a.lastActivity=t.timestamp)),e})),Object(f.a)(e).map((function(t){var e=Object(s.a)(t,2),a=e[0],r=e[1];return{user_id:a,gbp:A(r.GBP),usd:A(r.USD),eur:A(r.EUR),lastActivity:_()(r.lastActivity).format("DD-MM-YYYY")}}))}(c||[])}),[c]),m=Object(r.useCallback)((function(t){n(t)}),[]);return Object(Y.jsx)(l.a,{sx:{m:6},children:Object(Y.jsxs)(u.a,{children:[Object(Y.jsxs)(j.a,{children:[Object(Y.jsx)(o.a,{sx:{flex:"1 1 100%"},variant:"h6",children:"Transactions"}),Object(Y.jsx)(q,{value:a.value,options:H,onChange:m})]}),Object(Y.jsx)(T,{data:p,loading:v,error:h})]})})};c.a.render(Object(Y.jsx)(n.a.StrictMode,{children:Object(Y.jsx)(N,{})}),document.getElementById("root"))},97:function(t,e,a){}},[[128,1,2]]]);
//# sourceMappingURL=main.7f675b83.chunk.js.map